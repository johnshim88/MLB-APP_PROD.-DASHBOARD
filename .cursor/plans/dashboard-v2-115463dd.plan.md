<!-- 115463dd-1659-4140-98be-2a6cb87eda7a 62506af2-4fda-4867-989e-7ca962094c30 -->
# Dashboard V2 업그레이드 계획

## 목표

- 기존 대시보드 (mlb-app-prod-dashboard.vercel.app) 유지
- 새로운 V2 버전을 별도 URL (mlb-app-prod-dashboard-v2.vercel.app)로 배포
- 디자인 개선 및 기능 추가

## 프로젝트 구조 변경

### 1. 폴더 구조

```
DASHBOARD/
├── frontend/          # 기존 V1 (유지)
├── frontend_v2/       # 새로운 V2 프론트엔드
├── backend/           # 기존 V1 백엔드 (공유 가능)
├── backend_v2/        # V2 전용 백엔드 (필요시)
└── ★26SS MLB 생산스케쥴_DASHBOARD_V2.xlsx  # V2 엑셀 파일
```

## 주요 작업 항목

### 1. 프론트엔드 V2 생성 및 개선

#### 1.1 기본 구조 복사

- `frontend/index.html`을 `frontend_v2/index.html`로 복사
- `frontend/config.js`를 `frontend_v2/config.js`로 복사
- V2 전용 설정 추가

#### 1.2 KPI 카드 개선

- 기존 3개 카드 유지 (총 목표, 누적 출고 완료, 전체 진행률)
- **새로운 카드 2개 추가**:
  - "금주 출고 수량" (금주 actual 값만 표시)
  - "금주 출고 스타일 수" (스타일수 기준일 때)
- **주차 목표진행률** 시각화 강화:
  - 현재 작은 텍스트에서 큰 숫자로 변경
  - 별도 강조 스타일 적용 (색상, 폰트 크기 증가)

#### 1.3 디자인 개선

- **컬러 팔레트 파스텔톤으로 변경**:
  - 기존 진파랑 (#1d4ed8) → 파스텔 블루 (#a5d8ff)
  - 기존 연파랑 (#93c5fd) → 더 연한 파스텔 블루 (#d0e7ff)
  - 성공 색상: 파스텔 그린 (#86efac)
  - 경고 색상: 파스텔 레드 (#fca5a5)
- **전체 출고 진행률 원그래프**:
  - 더 부드러운 그라데이션 적용
  - 중앙 텍스트 스타일 개선
  - 애니메이션 효과 추가

#### 1.4 그래프 사이즈 일관성

- 모든 `chart-container`에 고정 높이 설정 (예: 400px)
- 반응형 그리드에서도 일관된 크기 유지
- `maintainAspectRatio: false` 유지

#### 1.5 세부 복종별 그래프 개선

- **현재**: 세로 막대 그래프 (1개 복종 선택)
- **변경**: 가로 막대 그래프 (모든 복종 한번에 표시)
- 스크롤 가능한 컨테이너로 감싸기
- 드롭다운 제거, 전체 복종 리스트 표시
- 숫자 겹침 문제 해결 (레이블 위치 조정, 폰트 크기 조정)

#### 1.6 데이터 내보내기 기능

- 헤더 영역에 "데이터 내보내기" 버튼 추가
- 클릭 시 `/api/export/excel` 엔드포인트 호출
- Excel 파일 다운로드 트리거

### 2. 백엔드 V2 개선

#### 2.1 엑셀 파일 다운로드 엔드포인트

- `GET /api/export/excel` 엔드포인트 추가
- SUMMARY 엑셀 파일을 직접 반환
- `Content-Disposition` 헤더로 파일명 설정
- 인증 필요 (verify_password)

#### 2.2 금주 출고 수량 데이터 처리

- 엑셀 파일 구조 변경 대응 (V2 엑셀 파일 사용)
- 금주 actual 값만 별도로 추출하는 로직 (필요시)
- 기존 API 응답 구조 유지하면서 추가 필드 제공

### 3. 배포 설정

#### 3.1 Vercel V2 배포 설정

- `frontend_v2/vercel.json` 생성
- 프로젝트명: `mlb-app-prod-dashboard-v2`
- API URL 환경 변수 설정

#### 3.2 백엔드 배포 (선택사항)

- 기존 백엔드 공유 또는 별도 배포
- V2 전용 엔드포인트 추가

## 파일 변경 사항

### 새로 생성할 파일

- `frontend_v2/index.html` - V2 프론트엔드
- `frontend_v2/config.js` - V2 설정
- `frontend_v2/vercel.json` - V2 배포 설정
- `backend/server.py` - 엑셀 다운로드 엔드포인트 추가 (기존 파일 수정)

### 수정할 파일

- `backend/server.py` - `/api/export/excel` 엔드포인트 추가

## 주의사항

1. **엑셀 파일 V2**: 사용자가 별도로 생성 필요 (금주 출고 수량 컬럼 추가)
2. **기존 대시보드**: 절대 수정하지 않음
3. **백엔드 공유**: 가능하면 기존 백엔드를 공유하고 엔드포인트만 추가
4. **환경 변수**: V2 배포 시 별도 설정 필요

## 구현 순서 (단계별)

### Phase 1: 디자인 & 구조 개선 (엑셀 V2 불필요)

1. 프론트엔드 V2 기본 구조 생성
2. 디자인 개선 (파스텔톤 컬러, 레이아웃)
3. 주차 목표진행률 시각화 강화 (기존 데이터 활용)
4. 전체 출고 진행률 원그래프 디자인 개선
5. 그래프 사이즈 일관성 개선
6. 세부 복종별 그래프를 가로 막대 + 스크롤로 변경
7. 백엔드 엑셀 다운로드 엔드포인트 추가 (기존 엑셀 파일 사용)
8. 데이터 내보내기 버튼 추가

### Phase 2: 금주 출고 수량 카드 추가 (엑셀 V2 준비 후)

- 기존 데이터로 계산 가능: `actual_{CURRENT_WEEK}` 값 사용
- 엑셀 V2 준비되면 별도 컬럼 데이터로 교체 가능하도록 구조 설계

## 주의사항

1. **기존 대시보드**: 절대 수정하지 않음
2. **엑셀 파일**: Phase 1에서는 기존 엑셀 파일 사용 가능
3. **금주 출고 수량**: 기존 데이터의 `actual_{CURRENT_WEEK}` 값으로 계산 가능
4. **백엔드 공유**: 가능하면 기존 백엔드를 공유하고 엔드포인트만 추가

### To-dos

- [ ] frontend_v2 폴더 생성 및 기본 파일 복사 (index.html, config.js, vercel.json)
- [ ] 파스텔톤 컬러 팔레트로 변경 (CSS 변수 및 차트 색상)
- [ ] KPI 카드에 금주 출고 수량/스타일 수 추가 및 주차 목표진행률 시각화 강화
- [ ] 전체 출고 진행률 원그래프 디자인 개선 (그라데이션, 중앙 텍스트, 애니메이션)
- [ ] 모든 그래프 컨테이너에 일관된 크기 설정 및 반응형 유지
- [ ] 세부 복종별 그래프를 가로 막대 그래프로 변경하고 스크롤 가능하게 구현
- [ ] 백엔드에 엑셀 파일 다운로드 엔드포인트 추가 (/api/export/excel)
- [ ] 프론트엔드에 데이터 내보내기 버튼 추가 및 기능 연결